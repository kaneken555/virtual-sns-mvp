# Virtual SNS MVP - 機能一覧

## 概要

AIが自動で反応する仮想SNS（X風UI）の実装済み機能と今後の拡張予定をまとめたドキュメント。

---

## 実装済み機能

### 1. コア機能

#### 1.1 投稿機能
- **新規投稿作成**: 280文字制限付きのテキスト投稿
- **文字数カウンター**: リアルタイムで残り文字数を表示
- **投稿バリデーション**: 空投稿・文字数超過の防止
- **投稿一覧表示**: 新しい順にタイムラインで表示
- **投稿永続化**: PostgreSQLデータベースへの保存

#### 1.2 AI自動返信機能
- **3種類のAIペルソナ**: 投稿に対して異なる性格のAIが返信
  - 👂 **傾聴ボット** (60%): 共感的で丁寧な応答
  - 😄 **ユーモアボット** (25%): 軽快で楽しい応答
  - 💪 **コーチボット** (15%): 励ましと前向きなアドバイス
- **非同期生成**: Celery Workerによるバックグラウンド処理
- **OpenAI API連携**: GPT-4o-miniを使用した自然な返信生成
- **重み付けランダム選択**: 各ペルソナの出現確率を調整可能

#### 1.3 リアルタイム更新機能
- **Server-Sent Events (SSE)**: サーバーからクライアントへの即時通知
- **Redis Pub/Sub**: AI返信イベントの効率的な配信
- **CustomEvent**: フロントエンドでのローカルUI更新
- **自動タイムライン更新**: AI返信が生成されると即座に画面反映

### 2. UI/UX機能

#### 2.1 X風ダークテーマUI
- **3カラムレイアウト**: 左ナビ、中央タイムライン、右サイドバー
- **ダークモード**: X（Twitter）のようなカラースキーム
- **CSS Variables**: テーマのカスタマイズが容易
- **ホバーエフェクト**: ボタンやカードのインタラクティブな反応

#### 2.2 レスポンシブデザイン
- **デスクトップ (1280px+)**: 3カラムレイアウト
- **タブレット (1024px - 1279px)**: 2カラムレイアウト（左サイドバー縮小）
- **モバイル (~1023px)**: 1カラムレイアウト（タイムラインのみ）

#### 2.3 UIコンポーネント
- **PostCard**: 投稿とAI返信を表示するカードコンポーネント
- **Avatar**: ユーザー/AIアバター画像
- **LeftSidebar**: ナビゲーションメニュー
- **RightSidebar**: トレンド/おすすめ（静的表示）
- **Skeleton**: ローディング中のプレースホルダー

#### 2.4 日時表示
- **相対時刻表示**: "3分前"、"1時間前" など
- **date-fns**: 多言語対応の日時フォーマット

---

## 今後の拡張予定

### Phase 1: ユーザー機能強化

- [ ] **ユーザー認証**: サインアップ、ログイン、JWT認証
- [ ] **ユーザープロフィール**: プロフィールページ、アバター変更
- [ ] **投稿の編集・削除**: 自分の投稿の管理機能

### Phase 2: インタラクション機能

- [ ] **いいね機能**: 投稿やAI返信へのいいね
- [ ] **リツイート機能**: 投稿の共有
- [ ] **ブックマーク**: お気に入り投稿の保存
- [ ] **返信機能**: ユーザー同士の返信（現在はAI返信のみ）

### Phase 3: コンテンツ機能

- [ ] **画像アップロード**: 投稿に画像添付
- [ ] **ハッシュタグ**: ハッシュタグ検索とトレンド表示
- [ ] **メンション**: @ユーザー名でメンション
- [ ] **投稿検索**: キーワード検索機能

### Phase 4: 通知・メッセージ

- [ ] **通知機能**: いいね、返信、メンション通知
- [ ] **ダイレクトメッセージ (DM)**: 1対1のメッセージ機能
- [ ] **プッシュ通知**: ブラウザ通知API連携

### Phase 5: AI機能拡張

- [ ] **AIペルソナのカスタマイズ**: ユーザーが独自のペルソナを作成
- [ ] **感情分析**: 投稿の感情を分析して適切なペルソナを選択
- [ ] **コンテキスト記憶**: 過去の投稿を考慮した返信生成
- [ ] **マルチモーダル**: 画像を理解するAI返信（GPT-4o）

### Phase 6: 管理・分析

- [ ] **管理画面**: 投稿管理、ユーザー管理、統計表示
- [ ] **レート制限**: 投稿数制限、API呼び出し制限
- [ ] **アナリティクス**: ユーザー行動分析、人気投稿ランキング

### Phase 7: テスト・品質

- [ ] **ユニットテスト**: Backend（pytest）、Frontend（Vitest）
- [ ] **E2Eテスト**: Playwright等を使用したシナリオテスト
- [ ] **CI/CDパイプライン**: GitHub Actionsによる自動テスト・デプロイ
- [ ] **ロギング**: 構造化ログ、エラートラッキング（Sentry等）
- [ ] **監視**: メトリクス収集、アラート設定

### Phase 8: 本番環境対応

- [ ] **本番デプロイ**: Vercel（Frontend）+ AWS/GCP（Backend）
- [ ] **マネージドサービス化**: RDS（PostgreSQL）、ElastiCache（Redis）
- [ ] **HTTPS/TLS**: SSL証明書設定
- [ ] **CDN**: 静的ファイルの高速配信
- [ ] **スケーリング**: オートスケーリング、ロードバランサー

---

## API エンドポイント一覧

### 投稿（Posts）

| メソッド | エンドポイント | 説明 | 実装状況 |
|---------|--------------|------|---------|
| GET | `/posts` | 投稿一覧取得（返信含む） | ✅ |
| POST | `/posts` | 新規投稿作成 | ✅ |
| GET | `/posts/{post_id}` | 特定投稿取得 | 未実装 |
| PUT | `/posts/{post_id}` | 投稿編集 | 未実装 |
| DELETE | `/posts/{post_id}` | 投稿削除 | 未実装 |

### 返信（Replies）

| メソッド | エンドポイント | 説明 | 実装状況 |
|---------|--------------|------|---------|
| POST | `/internal/replies` | AI返信登録（内部API） | ✅ |

### SSE（リアルタイム）

| メソッド | エンドポイント | 説明 | 実装状況 |
|---------|--------------|------|---------|
| GET | `/stream` | リアルタイム通知受信 | ✅ |

### ヘルスチェック

| メソッド | エンドポイント | 説明 | 実装状況 |
|---------|--------------|------|---------|
| GET | `/health` | サーバー稼働状況確認 | ✅ |

---

## 参考資料

- [README.md](../README.md) - セットアップ手順、アーキテクチャ
- [SECURITY.md](../SECURITY.md) - セキュリティポリシー、対策一覧
- [architecture.md](./architecture.md) - システムアーキテクチャ詳細
- [virtual-sns-input.md](../virtual-sns-input.md) - 詳細設計書
- [FastAPI公式ドキュメント](https://fastapi.tiangolo.com/)
- [React公式ドキュメント](https://react.dev/)
- [SQLAlchemy 2.0公式ドキュメント](https://docs.sqlalchemy.org/en/20/)
- [OpenAI API公式ドキュメント](https://platform.openai.com/docs/)

---

**最終更新日**: 2025-12-20
